#include <iostream>
#include <utility>
#include <vector>
#include <algorithm>
#include <string>
#include <exception>

using namespace std;

template<typename T1, typename T2>
class Pair
{
	T1 key;
	T2 value;
public:
	Pair(T1 _key, T2 _value) : key(_key), value(_value) {}

	T1 getKey() const { return key; }
	T2 getValue() const { return value; }
};

template<typename T1, typename T2>

class Registry
{
	vector<Pair<T1, T2>> list;
public:
	void add(T1 key, T2 value) { list.emplace_back(key, value); }
	void remove(T1 key) {
		auto it = find_if(list.begin(), list.end(), [&key](const Pair<T1, T2>& p) {
			return p.getKey() == key;
			});
		if (it != list.end()) {
			list.erase(it);
			cout << "Key " << key << " was deleted with its value\n";
		}
		else
			cout << "Invalid key\n";
	}
	void print() {
		for (const auto& it : list) {
			cout << it.getKey() << " - " << it.getValue() << endl;
		}
	}
	void find(T1 key) {
		for (const auto& it : list) {
			if (it.getKey() == key)
				cout << it.getValue() << endl;
		}
	}
};

template<typename TK, typename TV>
void processRegistry() {
	Registry<TK, TV> reg;
	string command;
	TK key;
	TV value;

	cout << "\nКоманды: add, remove, print, find, exit\n";
	while (true) {
		cout << "\nВведите команду: ";
		cin >> command;

		if (command == "add") {
			cout << "Введите ключ и значение: ";
			cin >> key >> value;
			reg.add(key, value);
		}
		else if (command == "remove") {
			cout << "Введите ключ для удаления: ";
			cin >> key;
			reg.remove(key);
		}
		else if (command == "print") {
			reg.print();
		}
		else if (command == "find") {
			cout << "Введите ключ для поиска: ";
			cin >> key;
			reg.find(key);
		}
		else if (command == "exit") {
			break;
		}
		else {
			cout << "Неизвестная команда!\n";
		}
	}
}

int main(){
	setlocale(LC_ALL, "RU");
	string a = "add", b = "remove", c = "print", d = "find";

	int key1; string val1;
	int key2; string val2;

	cout << "Choose type data (Key / Value):\n";
	cout << "1. int / int\n";
	cout << "2. double / string\n";
	cout << "3. string / string\n";
	cout << "4. string / int\n";
	cout << "Your choice: ";

	int choice;
	cin >> choice;

	switch (choice) {
	case 1: processRegistry<int, int>(); break;
	case 2: processRegistry<double, string>(); break;
	case 3: processRegistry<string, string>(); break;
	case 4: processRegistry<string, int>(); break;
	default: cout << "Неверный выбор. Выход.\n"; break;
	}
}
